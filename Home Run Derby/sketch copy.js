let bat; let ball; let flags; let score = 0; let highScore = 0; let lives = 3; let ground; let flying = false; let clouds; let hit = false; let spawner,spawner2; function setup() { new Canvas(800, 600); textSize(22); world.gravity.y = 10; ball = new Sprite(400, 100, 30); ball.visible = false; bat = new Sprite(160, 250, [ [0, -25], [-100, 12.5], [0, 25], [100, 12.5], [0, -25] ], 'k'); bat.image = 'images/bat-removebg-preview.png'; bat.addCollider(-60, 0, 25); bat.addCollider(40, 0, 50); bat.offset.x = -40; bat.rotation = 30; bat.debug = false; clouds = new Group(); for (let i = 0; i < 3; i++) { let cloud = new clouds.Sprite(); cloud.image = "images/cloud.png"; cloud.x = 400 + i * 300; cloud.y = 100; cloud.collider = "none"; cloud.layer = -1; } ground = new Sprite(400, 650, 2000, 300, "static"); ground.color = 130; flags = new Group(); flags.collider = "none"; spawner = new Sprite(400,100,60,60,"none"); spawner.color = 150; spawner2 = new Sprite(370,100,60,30,"n"); spawner2.color = 0; spawner2.layer = -1; spawner.layer = -1; } function draw() { background('skyblue'); camera.on(); if (mouse.presses()) { bat.rotateTo(170, 11); } if (mouse.released()) { bat.rotateTo(30, -8); } if (ball.collided(ground) || ball.y > 800) { ball = new Sprite(400, 100, 30); ball.direction = 180; ball.speed = 9 + random(-2, 2); delay(6000); } if (ball.x > 600) { flying = true; } if (flying) { camera.x = ball.x - 200; } if (ball.collided(bat)) { if (random() < .03) { ball.speed = 30; } hit = true; } if (ground.collides(ball) || ball.y > 800) { flying = false; console.log("true"); console.log(ground.collides(ball)); camera.x = 400; if (score > highScore) { highScore = score; for (let i = 0; i < flags.length; i++) { flags[i].image = "images/flag.png"; } let flag = new flags.Sprite(); flag.image = "images/highscoreflag.png"; flag.x = score + 400; flag.y = 420; flag.scale = 2; } for (let i = 0; i < clouds.length; i++) { clouds[i].x = 400 + i * 300; } ball.remove(); hit = false; sleep(6000); } for (let i = 0; i < clouds.length; i++) { if (clouds[i].x < camera.x - 500) { clouds[i].x = camera.x + 500; } } if (highScore > 1) { text(highScore, highScore + 345, 350); } camera.off(); ground.x = 400 + camera.x; score = Math.floor((camera.x - canvas.w / 2)); text("score: " + score, 200, 50); text("HIGH SCORE: " + highScore, 400, 52); if (hit) { if (ball.speed < 10) { fill("red"); } else if (ball.speed < 16) { fill("orange"); } else { fill("green"); } text("SPEED: " + Math.floor(ball.speed), 30, 50); fill(0); } }